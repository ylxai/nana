(()=>{var e={};e.id=439,e.ids=[439],e.modules={517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},1016:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>I,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>f});var s={};r.r(s),r.d(s,{PATCH:()=>n});var o=r(5419),i=r(9108),a=r(9678),u=r(8070),p=r(6517);async function n(e,{params:t}){try{let r=t.photoId,{likes:s}=await e.json();if("number"!=typeof s)return u.Z.json({message:"Likes must be a number"},{status:400});let{data:o,error:i}=await p.pR.from("photos").update({likes:s}).eq("id",r).select().single();if(i)throw Error(`Update likes failed: ${i.message}`);if(!o)return u.Z.json({message:"Photo not found"},{status:404});return u.Z.json(o)}catch(e){return console.error("Update photo likes error:",e),u.Z.json({message:"Failed to update likes",error:e.message},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/photos/[photoId]/likes/route",pathname:"/api/photos/[photoId]/likes",filename:"route",bundlePath:"app/api/photos/[photoId]/likes/route"},resolvedPagePath:"/workspace/src/app/api/photos/[photoId]/likes/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:h,headerHooks:m,staticGenerationBailout:f}=c,I="/api/photos/[photoId]/likes/route";function g(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},6517:(e,t,r)=>{"use strict";r.d(t,{$6:()=>i,FW:()=>p,_I:()=>u,cT:()=>a,pR:()=>o});var s=r(1971);(0,s.eI)("https://azspktldiblhrwebzmwq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6c3BrdGxkaWJsaHJ3ZWJ6bXdxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5NDQwNDQsImV4cCI6MjA2OTUyMDA0NH0.uKHB4K9hxUDTc0ZkwidCJv_Ev-oa99AflFvrFt_8MG8");let o=(0,s.eI)("https://azspktldiblhrwebzmwq.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}}),i=process.env.SUPABASE_STORAGE_BUCKET||"hafiportrait-photos";async function a(e,t){let{data:r,error:s}=await o.storage.from(i).upload(t,e,{cacheControl:"3600",upsert:!1});if(s)throw Error(`Upload failed: ${s.message}`);let{data:a}=o.storage.from(i).getPublicUrl(r.path);return a.publicUrl}async function u(e){let{error:t}=await o.storage.from(i).remove([e]);if(t)throw Error(`Delete failed: ${t.message}`)}function p(e,t,r){let s=Date.now(),o=Math.random().toString(36).substring(2,8),i=t.split(".").pop(),a=`${s}_${o}.${i}`;return r?`${e}/${r}/${a}`:`${e}/${a}`}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,249],()=>r(1016));module.exports=s})();