(()=>{var e={};e.id=404,e.ids=[404],e.modules={517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},3165:(e,t,s)=>{"use strict";s.r(t),s.d(t,{headerHooks:()=>m,originalPathname:()=>b,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>d,staticGenerationAsyncStorage:()=>S,staticGenerationBailout:()=>E});var r={};s.r(r),s.d(r,{GET:()=>c});var a=s(5419),o=s(9108),i=s(9678),u=s(8070),n=s(6517);async function c(){try{let{data:e,error:t}=await n.pR.storage.listBuckets();if(t)throw Error(`Bucket list error: ${t.message}`);let s=e?.some(e=>e.name===n.$6),{data:r,error:a}=await n.pR.storage.from(n.$6).list("",{limit:1});return u.Z.json({success:!0,message:"Supabase Storage connection successful!",bucket:n.$6,bucketExists:s,buckets:e?.map(e=>e.name)||[],filesError:a?.message||null,config:{supabase_url:"✅ Set",anon_key:"✅ Set",service_key:process.env.SUPABASE_SERVICE_ROLE_KEY?"✅ Set":"❌ Not set",bucket_name:process.env.SUPABASE_STORAGE_BUCKET?"✅ Set":"❌ Using default"}})}catch(e){return console.error("Supabase test error:",e),u.Z.json({success:!1,message:"Supabase Storage connection failed",error:e.message,config:{supabase_url:"✅ Set",anon_key:"✅ Set",service_key:process.env.SUPABASE_SERVICE_ROLE_KEY?"✅ Set":"❌ Not set",bucket_name:process.env.SUPABASE_STORAGE_BUCKET?"✅ Set":"❌ Using default"}},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/test/supabase/route",pathname:"/api/test/supabase",filename:"route",bundlePath:"app/api/test/supabase/route"},resolvedPagePath:"/workspace/src/app/api/test/supabase/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:S,serverHooks:d,headerHooks:m,staticGenerationBailout:E}=p,b="/api/test/supabase/route";function f(){return(0,i.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:S})}},6517:(e,t,s)=>{"use strict";s.d(t,{$6:()=>o,FW:()=>n,_I:()=>u,cT:()=>i,pR:()=>a});var r=s(1971);(0,r.eI)("https://azspktldiblhrwebzmwq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6c3BrdGxkaWJsaHJ3ZWJ6bXdxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5NDQwNDQsImV4cCI6MjA2OTUyMDA0NH0.uKHB4K9hxUDTc0ZkwidCJv_Ev-oa99AflFvrFt_8MG8");let a=(0,r.eI)("https://azspktldiblhrwebzmwq.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}}),o=process.env.SUPABASE_STORAGE_BUCKET||"hafiportrait-photos";async function i(e,t){let{data:s,error:r}=await a.storage.from(o).upload(t,e,{cacheControl:"3600",upsert:!1});if(r)throw Error(`Upload failed: ${r.message}`);let{data:i}=a.storage.from(o).getPublicUrl(s.path);return i.publicUrl}async function u(e){let{error:t}=await a.storage.from(o).remove([e]);if(t)throw Error(`Delete failed: ${t.message}`)}function n(e,t,s){let r=Date.now(),a=Math.random().toString(36).substring(2,8),o=t.split(".").pop(),i=`${r}_${a}.${o}`;return s?`${e}/${s}/${i}`:`${e}/${i}`}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,249],()=>s(3165));module.exports=r})();